<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>U.S. GDP By Year</title>
    <script src="https://d3js.org/d3.v4.min.js"></script>
  </head>
  <style>

  #chart {
    text-align: center;
    margin-top: 5em;
  }

  </style>
  <body>

    <div id="chart"></div>

    <script>

    //var url = https://raw.githubusercontent.com/FreeCodeCamp/ProjectReferenceData/master/GDP-data.json;

      var myData = [];
      var height = 500;
      var width = 500;

      var tempColor;
      var yScale;
      var xScale;
      var colors;
      var myChart;


      d3.json("data.json").get(function(error, d){
          for (var i = 0; i < d.data.length; i++) {
            console.log(d.data[i][0], d.data[i][1]);
            myData.push(d.data[i][0], d.data[i][1]);
          }



    /*  for(var i = 0; i < 50; i++){
        myData.push(Math.random() * 30);
      }

    */

      yScale = d3.scaleLinear()
        .domain([0, d3.max(myData)])
        .range([0, height]);

      xScale = d3.scaleBand()
        .domain(myData)
        .paddingInner(.2)
        .paddingOuter(.3)
        .range([0, width]);

      colors = d3.scaleLinear()
        .domain([0, myData.length * .33,
                    myData.length * .66,
                    myData.length
                    ])
        .range(['#8e44ad', '#2ecc71', '#3498db', '#d35400'])

      myChart =
        d3.select('#chart').append('svg')
          .attr('width', width)
          .attr('height', height)
          .style('background', '#34495e')
          .selectAll('rect')
          .data(myData)
          .enter().append('rect')
          // Solid green bars
          //.style('fill', '#2ecc71')
          .attr('fill', function(d, i){
              return colors(i);
            })
          .attr('width', function(){
              return xScale.bandwidth();
            })
          .attr('height', 0)
          .attr('x', function(d){
              return xScale(d);
            })
          .attr('y', height)


      // Animation Effects
      .on('mouseover', function(d){
        tempColor = this.style.fill;
        d3.select(this)
          .style('fill', '#ecf0f1')
        })

      .on('mouseout', function(d){
        d3.select(this)
          .style('fill', tempColor)
        });

      myChart.transition()
        .attr('height', function(d){
          return yScale(d);
        })
        .attr('y', function(d){
          return height - yScale(d);
        })
        .delay(function(d, i){
          return i * 20;
        })
        .duration(1000)
        .ease(d3.easeBounceOut)



  });

    </script>

  </body>
</html>
